# DeltaRCM: A Reduced-Complexity Model for River Delta Formation

## Human Note:

This repository is largely a test of the latest Claude capabilities to start and execute a somewhat complex programming task.
We initialized the repository with the `docs/` directory and placed the two original DeltaRCM papers as PDFs there.
Then we populated a README.md file with the below text:

```
Project to create the code required to implement the DeltaRCM numerical delta simulation model described in the PDFs in the `docs` folder.

The model should be well commented, object-oriented, and have clear structure.
It should be written in Python, using modern syntax and best practices.

The model should be able to run a simulation of a delta prograding into a basin, with the ability to change parameters such as sediment supply, sea level rise, and subsidence rate.
```

This being done, we opened Claude Code in the command line, and let it run it's own `/init` command to generate the `CLAUDE.md` file.
Once it had done that, we asked it to read the documents and develop the DeltaRCM numerical model in Python for us.

**Everything else in this repository, save this section of text and the original PDF documents, was generated by Claude.**
After the first iteration, we ran the generated model and did not like the results; so we asked Claude to review the code, compare it to the paper, and make some revisions.
The second time around we noted that the water and sediment routing routines were not working as expected, so we gave Claude another chance to make revisions.

The code and markdown documents reflect 3-iterations of this human-machine workflow, wherein Claude generated the code, and it was loosely reviewed and tested by a human.
A few lines related to model parameters were manually tweaked, but nothing of substance.
While the model is a far cry from the established `pyDeltaRCM` implementation, it is an interesting demonstration of how far LLMs have come in their ability to put together complex codebases.
The general structure of the model seems to be fairly good.
If this was a real project, we might continue down this iterative path with Claude and eventually arrive at a functional DeltaRCM model.

*COST:* I estimate about $5 of compute cost was incurred, with under 30 minutes of Claude Code running.


## Introduction

This repository contains a Python implementation of the DeltaRCM model as described in:

- Liang et al. (2015). A reduced-complexity model for river delta formation – Part 1: Modeling deltas with channel dynamics
- Liang et al. (2015). A reduced-complexity model for river delta formation – Part 2: Assessment of the flow routing scheme

## Model Description

DeltaRCM is a rule-based cellular morphodynamic model for simulating river delta formation. Unlike detailed computational fluid dynamics (CFD) models, DeltaRCM uses a stochastic parcel-based cellular routing scheme for water and sediment, along with phenomenological rules for sediment deposition and erosion.

The model can resolve a wide range of channel dynamics, including:
- Channel elongation
- Channel bifurcation
- Channel avulsion
- Channel migration

It can produce physically realistic delta morphologies such as alluvial fan deltas and deltas with multiple orders of bifurcations.

## Key Model Components

1. **Water Routing**: A stochastic weighted random walk method for water parcels based on water surface gradients.
2. **Water Surface Calculation**: Calculation of the water surface profile, accounting for backwater effects.
3. **Sediment Transport**: Routing both bedload and suspended sediment parcels.
4. **Bed Topography Update**: Updating the bed elevation based on erosion and deposition patterns.
5. **Stratigraphy Recording**: Optional tracking of deposit age and composition.

## Model Parameters

The model includes numerous parameters that can be adjusted to simulate different delta environments:

- Grid configuration (domain size, cell size)
- Flow parameters (water discharge, inlet depth, inlet width)
- Sediment parameters (concentration, bedload vs. suspended load)
- Sea level parameters (ocean depth, sea level rise rate)
- Numerical parameters (number of parcels, time step)

## Usage

To run a simulation:

```bash
python run_model.py
```

The model outputs visualization of the evolving delta topography, water depth, and flow patterns.

## Project Structure

- `deltarcm/`: Main model package
  - `__init__.py`: Package initialization
  - `model.py`: Core model implementation
  - `water_routing.py`: Water routing implementation
  - `sediment_routing.py`: Sediment transport implementation
  - `utils.py`: Utility functions for visualization and output
- `run_model.py`: Script to run a simulation
- `docs/`: Reference papers
- `output/`: Simulation outputs (created when running the model)

## Example Results

The model can produce realistic delta morphology with:
- Distributary channel networks
- Mouth bar formation
- Levee development
- Channel bifurcation and avulsion
- Topset, foreset, and bottomset deposits

## References

1. Liang, M., Voller, V. R., & Paola, C. (2015). A reduced-complexity model for river delta formation – Part 1: Modeling deltas with channel dynamics. Earth Surface Dynamics, 3, 67-86.
2. Liang, M., Geleynse, N., Edmonds, D. A., & Passalacqua, P. (2015). A reduced-complexity model for river delta formation – Part 2: Assessment of the flow routing scheme. Earth Surface Dynamics, 3, 87-104.
